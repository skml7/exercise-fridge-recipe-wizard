{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Fridge Recipe Wizard Eval Record",
  "type": "object",
  "required": ["eval_id", "timestamp", "request", "response", "scores"],
  "properties": {
    "eval_id": { "type": "string" },
    "timestamp": { "type": "string", "format": "date-time" },
    "trace_id": { "type": "string" },
    "reviewer_id": { "type": "string" },
    "request": {
      "type": "object",
      "required": ["messages"],
      "properties": {
        "messages": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["role", "content"],
            "properties": {
              "role": { "type": "string" },
              "content": { "type": "string" }
            }
          }
        },
        "fridge_input": { "type": ["object", "null"] }
      }
    },
    "response": {
      "type": "object",
      "properties": {
        "options": { "type": "array" },
        "selected": { "type": ["object", "null"] }
      }
    },
    "scores": {
      "type": "object",
      "required": [
        "input_understanding",
        "option_quality",
        "selection_quality",
        "reliability",
        "clarity"
      ],
      "properties": {
        "input_understanding": { "type": "number", "minimum": 1, "maximum": 5 },
        "option_quality": { "type": "number", "minimum": 1, "maximum": 5 },
        "selection_quality": { "type": "number", "minimum": 1, "maximum": 5 },
        "reliability": { "type": "number", "minimum": 1, "maximum": 5 },
        "clarity": { "type": "number", "minimum": 1, "maximum": 5 }
      }
    },
    "overall": { "type": "number" },
    "rationale": {
      "type": "object",
      "properties": {
        "input_understanding": { "type": "string" },
        "option_quality": { "type": "string" },
        "selection_quality": { "type": "string" },
        "reliability": { "type": "string" },
        "clarity": { "type": "string" }
      }
    },
    "notes": { "type": "string" },
    "flags": {
      "type": "array",
      "items": { "type": "string" }
    }
  }
}
